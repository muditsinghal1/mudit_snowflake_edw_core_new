USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS RL_AVTR_EDW_DEV_SCH_TRANSFORM_RO;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS RL_AVTR_EDW_DEV_SCH_MODEL_RO;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS RL_AVTR_EDW_DEV_SCH_PUBLISHED_RO;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS EXT_RL_AVTR_DEV_DEV_EDW_CORE_SHARE;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS AD_GRP_FR_OPERATION;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS AR_RL_AVTR_OP_MGMT;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS DR_RL_AVTR_OP_MGMT_RO;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS AD_GRP_FR_PRJ_RL_AVTR_OP_MGMT_ENGINEER;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS AD_GRP_FR_PRJ_RL_AVTR_OP_MGMT_READER;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS RL_AVTR_TASK_OPERATOR;
USE ROLE SECURITYADMIN;
CREATE USER IF NOT EXISTS SVC_AVTR_OP_MGMT
    DEFAULT_ROLE = AD_GRP_FR_OPERATION
    DEFAULT_WAREHOUSE = WH_OP_MGMT
    RSA_PUBLIC_KEY = 'MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApmxxQfpr2CXcDmW2TVlTldrYEIJZvERRZWcseE8VznGQZl6mx7gZEdC7Mf0jCv5ft6LW3U7ahHcdYQqhlgcr5lCQpGARK5GytdYYbjn/oTfkQUeirP8KSALxmWk5xtPJmkn2T9aJmlEO/mSpCQpoP8klTPVM+sSDdThcqJtNXAwuxU7sXuxF5r40JANVdcgUVE7qWcXEPO2IZHEpd4T2hBFMQUm9nBp14hROC/PieP5Z0MawvLFqT78OS8A5Hc789nUNnpd3xfFkq42pmS69fKwHXfRx0b4ICXXqCBLWILiQj6S5tM82kzjaIV6cY5ZGXWVGKpo+TG0F7nuqTzVmjwIDAQAB'
    DEFAULT_SECONDARY_ROLES = ();
USE ROLE ACCOUNTADMIN;
CREATE RESOURCE MONITOR IF NOT EXISTS AVTR_OP_MGMT_RM
    FREQUENCY = MONTHLY
    START_TIMESTAMP = IMMEDIATELY
    NOTIFY_USERS = null
TRIGGERS
    ON 75 PERCENT DO NOTIFY
    ON 90 PERCENT DO NOTIFY
    ON 100 PERCENT DO NOTIFY;
USE ROLE SYSADMIN;
CREATE WAREHOUSE IF NOT EXISTS WH_OP_MGMT
    INITIALLY_SUSPENDED = true
    SCALING_POLICY = 'ECONOMY'
    AUTO_SUSPEND = 600
    AUTO_RESUME = true
    MAX_CLUSTER_COUNT = 1;
USE ROLE SYSADMIN;
CREATE DATABASE IF NOT EXISTS AVTR_EDW_DEV;
USE ROLE SYSADMIN;
CREATE DATABASE IF NOT EXISTS AVTR_DB_OP_MGMT;
USE ROLE ACCOUNTADMIN;
CREATE NOTIFICATION INTEGRATION IF NOT EXISTS OP_MGMT_TASK_NOTIFICATION 
    TYPE = QUEUE
    NOTIFICATION_PROVIDER = AWS_SNS
    ENABLED = true
    DIRECTION = 'OUTBOUND'
    AWS_SNS_TOPIC_ARN = 'arn:aws:sns:us-east-1:728901465415:AVTR-DCDET-Notification'
    AWS_SNS_ROLE_ARN = 'arn:aws:iam::728901465415:role/AVTR-Dev-DCDET-Op-Mgmt-SNS-Role';
USE ROLE ACCOUNTADMIN;
CREATE SHARE IF NOT EXISTS DEV_SHARE_EDW_CORE
    SECURE_OBJECTS_ONLY = false;
USE ROLE SECURITYADMIN;
GRANT USAGE ON DATABASE AVTR_EDW_DEV TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RO;
USE ROLE SECURITYADMIN;
GRANT USAGE ON DATABASE AVTR_EDW_DEV TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON DATABASE AVTR_EDW_DEV TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RO;
USE ROLE SECURITYADMIN;
GRANT USAGE ON DATABASE AVTR_EDW_DEV TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON DATABASE AVTR_EDW_DEV TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RO;
USE ROLE SECURITYADMIN;
GRANT USAGE ON DATABASE AVTR_EDW_DEV TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
GRANT IMPORTED PRIVILEGES ON DATABASE AVTR_DEV_EDW_CORE_SHARE TO ROLE EXT_RL_AVTR_DEV_DEV_EDW_CORE_SHARE;
USE ROLE SECURITYADMIN;
GRANT OWNERSHIP ON ROLE AD_GRP_FR_OPERATION TO ROLE RL_USER_MGMT COPY CURRENT GRANTS;
USE ROLE SECURITYADMIN;
GRANT USAGE ON warehouse WH_OP_MGMT TO ROLE AR_RL_AVTR_OP_MGMT;
USE ROLE SECURITYADMIN;
GRANT USAGE ON DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RO;
USE ROLE SECURITYADMIN;
GRANT USAGE ON FUTURE SCHEMAS IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RO;
USE ROLE SECURITYADMIN;
GRANT SELECT ON FUTURE TABLES IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RO;
USE ROLE SECURITYADMIN;
GRANT SELECT ON FUTURE EXTERNAL TABLES IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RO;
USE ROLE SECURITYADMIN;
GRANT SELECT ON FUTURE VIEWS IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RO;
USE ROLE SECURITYADMIN;
GRANT SELECT ON FUTURE MATERIALIZED VIEWS IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RO;
USE ROLE SECURITYADMIN;
GRANT MONITOR ON FUTURE TASKS IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RO;
USE ROLE SECURITYADMIN;
GRANT READ ON FUTURE STAGES IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RO;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON FUTURE SCHEMAS IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT CREATE SCHEMA ON DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON FUTURE SCHEMAS IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON FUTURE TABLES IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON FUTURE EXTERNAL TABLES IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON FUTURE VIEWS IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON FUTURE MATERIALIZED VIEWS IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON FUTURE STREAMS IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON FUTURE TASKS IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON FUTURE STAGES IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON FUTURE FILE FORMATS IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON FUTURE SEQUENCES IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON FUTURE FUNCTIONS IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON FUTURE PROCEDURES IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT OWNERSHIP ON ROLE AD_GRP_FR_PRJ_RL_AVTR_OP_MGMT_ENGINEER TO ROLE RL_USER_MGMT COPY CURRENT GRANTS;
USE ROLE SECURITYADMIN;
GRANT OWNERSHIP ON ROLE AD_GRP_FR_PRJ_RL_AVTR_OP_MGMT_READER TO ROLE RL_USER_MGMT COPY CURRENT GRANTS;
USE ROLE SECURITYADMIN;
GRANT usage ON integration OP_MGMT_TASK_NOTIFICATION TO ROLE AD_GRP_FR_PRJ_RL_AVTR_OP_MGMT_ENGINEER;
USE ROLE SECURITYADMIN;
GRANT USAGE ON DATABASE DB_AVTR_PROVISION TO ROLE AD_GRP_FR_OPERATION;
USE ROLE ACCOUNTADMIN;
GRANT EXECUTE TASK ON ACCOUNT TO ROLE RL_AVTR_TASK_OPERATOR;
USE ROLE ACCOUNTADMIN;
GRANT EXECUTE MANAGED TASK ON ACCOUNT TO ROLE RL_AVTR_TASK_OPERATOR;
USE ROLE SECURITYADMIN;
GRANT ROLE SECURITYADMIN TO ROLE AD_GRP_FR_OPERATION;
USE ROLE SECURITYADMIN;
GRANT ROLE AD_GRP_FR_PRJ_RL_AVTR_OP_MGMT_ENGINEER TO ROLE AD_GRP_FR_OPERATION;
USE ROLE SECURITYADMIN;
GRANT ROLE AD_GRP_FR_PRJ_RL_AVTR_EDW_DEV_ENGINEER TO ROLE AD_GRP_FR_OPERATION;
USE ROLE SECURITYADMIN;
GRANT ROLE AD_GRP_FR_PRJ_RL_AVTR_EDW_QA_ENGINEER TO ROLE AD_GRP_FR_OPERATION;
USE ROLE SECURITYADMIN;
GRANT ROLE AD_GRP_FR_PRJ_RL_AVTR_EDW_PROD_READER TO ROLE AD_GRP_FR_OPERATION;
USE ROLE SECURITYADMIN;
GRANT ROLE AR_RL_AVTR_OP_MGMT TO ROLE AD_GRP_FR_PRJ_RL_AVTR_OP_MGMT_ENGINEER;
USE ROLE SECURITYADMIN;
GRANT ROLE DR_RL_AVTR_OP_MGMT_RW TO ROLE AD_GRP_FR_PRJ_RL_AVTR_OP_MGMT_ENGINEER;
USE ROLE SECURITYADMIN;
GRANT ROLE RL_AVTR_TASK_OPERATOR TO ROLE AD_GRP_FR_PRJ_RL_AVTR_OP_MGMT_ENGINEER;
USE ROLE SECURITYADMIN;
GRANT ROLE AR_RL_AVTR_OP_MGMT TO ROLE AD_GRP_FR_PRJ_RL_AVTR_OP_MGMT_READER;
USE ROLE SECURITYADMIN;
GRANT ROLE DR_RL_AVTR_OP_MGMT_RO TO ROLE AD_GRP_FR_PRJ_RL_AVTR_OP_MGMT_READER;
USE ROLE SECURITYADMIN;
GRANT ROLE AD_GRP_FR_PRJ_RL_AVTR_OP_MGMT_ENGINEER TO USER SVC_AVTR_OP_MGMT;
USE ROLE SECURITYADMIN;
GRANT ROLE AD_GRP_FR_OPERATION TO USER SVC_AVTR_OP_MGMT;
USE ROLE ACCOUNTADMIN;
ALTER WAREHOUSE IF EXISTS WH_OP_MGMT SET RESOURCE_MONITOR = AVTR_OP_MGMT_RM;
USE ROLE ACCOUNTADMIN;
ALTER SHARE IF EXISTS DEV_SHARE_EDW_CORE SET
    ACCOUNTS = OF52068;
USE ROLE SYSADMIN;
CREATE SCHEMA IF NOT EXISTS AVTR_EDW_DEV.TRANSFORM;
USE ROLE SYSADMIN;
CREATE SCHEMA IF NOT EXISTS AVTR_EDW_DEV.MODEL;
USE ROLE SYSADMIN;
CREATE SCHEMA IF NOT EXISTS AVTR_EDW_DEV.PUBLISHED;
USE ROLE SYSADMIN;
CREATE SCHEMA IF NOT EXISTS AVTR_DB_OP_MGMT.METADATA;
USE ROLE SYSADMIN;
CREATE SCHEMA IF NOT EXISTS AVTR_DB_OP_MGMT.CONTROL;
USE ROLE SYSADMIN;
CREATE SCHEMA IF NOT EXISTS AVTR_DB_OP_MGMT.RAW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON SCHEMA AVTR_DB_P_AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RO;
USE ROLE SECURITYADMIN;
GRANT USAGE ON SCHEMA AVTR_DB_P_AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON SCHEMA AVTR_DB_P_AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RO;
USE ROLE SECURITYADMIN;
GRANT USAGE ON SCHEMA AVTR_DB_P_AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON SCHEMA AVTR_DB_P_AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RO;
USE ROLE SECURITYADMIN;
GRANT USAGE ON SCHEMA AVTR_DB_P_AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
GRANT CREATE TABLE ON SCHEMA AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
GRANT INSERT ON FUTURE TABLES IN SCHEMA AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
GRANT DELETE ON FUTURE TABLES IN SCHEMA AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
GRANT SELECT ON FUTURE TABLES IN SCHEMA AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
GRANT TRUNCATE ON FUTURE TABLES IN SCHEMA AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
GRANT UPDATE ON FUTURE TABLES IN SCHEMA AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
GRANT CREATE VIEW ON SCHEMA AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
GRANT SELECT ON FUTURE VIEWS IN SCHEMA AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
GRANT READ ON FUTURE STAGES IN SCHEMA AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
GRANT WRITE ON FUTURE STAGES IN SCHEMA AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON FUTURE STAGES IN SCHEMA AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
GRANT CREATE PROCEDURE ON SCHEMA AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON FUTURE PROCEDURES IN SCHEMA AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
GRANT CREATE FUNCTION ON SCHEMA AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON FUTURE FUNCTIONS IN SCHEMA AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON FUTURE SEQUENCES IN SCHEMA AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON FUTURE FILE FORMATS IN SCHEMA AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RW;
USE ROLE SECURITYADMIN;
GRANT SELECT ON FUTURE TABLES IN SCHEMA AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RO;
USE ROLE SECURITYADMIN;
GRANT SELECT ON FUTURE VIEWS IN SCHEMA AVTR_EDW_DEV.TRANSFORM TO ROLE RL_AVTR_EDW_DEV_SCH_TRANSFORM_RO;
USE ROLE SECURITYADMIN;
GRANT CREATE TABLE ON SCHEMA AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
GRANT INSERT ON FUTURE TABLES IN SCHEMA AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
GRANT DELETE ON FUTURE TABLES IN SCHEMA AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
GRANT SELECT ON FUTURE TABLES IN SCHEMA AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
GRANT TRUNCATE ON FUTURE TABLES IN SCHEMA AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
GRANT UPDATE ON FUTURE TABLES IN SCHEMA AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
GRANT CREATE VIEW ON SCHEMA AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
GRANT SELECT ON FUTURE VIEWS IN SCHEMA AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
GRANT READ ON FUTURE STAGES IN SCHEMA AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
GRANT WRITE ON FUTURE STAGES IN SCHEMA AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON FUTURE STAGES IN SCHEMA AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
GRANT CREATE PROCEDURE ON SCHEMA AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON FUTURE PROCEDURES IN SCHEMA AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
GRANT CREATE FUNCTION ON SCHEMA AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON FUTURE FUNCTIONS IN SCHEMA AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON FUTURE SEQUENCES IN SCHEMA AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON FUTURE FILE FORMATS IN SCHEMA AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RW;
USE ROLE SECURITYADMIN;
GRANT SELECT ON FUTURE TABLES IN SCHEMA AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RO;
USE ROLE SECURITYADMIN;
GRANT SELECT ON FUTURE VIEWS IN SCHEMA AVTR_EDW_DEV.MODEL TO ROLE RL_AVTR_EDW_DEV_SCH_MODEL_RO;
USE ROLE SECURITYADMIN;
GRANT CREATE TABLE ON SCHEMA AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
GRANT INSERT ON FUTURE TABLES IN SCHEMA AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
GRANT DELETE ON FUTURE TABLES IN SCHEMA AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
GRANT SELECT ON FUTURE TABLES IN SCHEMA AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
GRANT TRUNCATE ON FUTURE TABLES IN SCHEMA AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
GRANT UPDATE ON FUTURE TABLES IN SCHEMA AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
GRANT CREATE VIEW ON SCHEMA AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
GRANT SELECT ON FUTURE VIEWS IN SCHEMA AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
GRANT READ ON FUTURE STAGES IN SCHEMA AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
GRANT WRITE ON FUTURE STAGES IN SCHEMA AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON FUTURE STAGES IN SCHEMA AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
GRANT CREATE PROCEDURE ON SCHEMA AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON FUTURE PROCEDURES IN SCHEMA AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
GRANT CREATE FUNCTION ON SCHEMA AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON FUTURE FUNCTIONS IN SCHEMA AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON FUTURE SEQUENCES IN SCHEMA AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON FUTURE FILE FORMATS IN SCHEMA AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RW;
USE ROLE SECURITYADMIN;
GRANT SELECT ON FUTURE TABLES IN SCHEMA AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RO;
USE ROLE SECURITYADMIN;
GRANT SELECT ON FUTURE VIEWS IN SCHEMA AVTR_EDW_DEV.PUBLISHED TO ROLE RL_AVTR_EDW_DEV_SCH_PUBLISHED_RO;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON ALL SCHEMAS IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON SCHEMA DB_AVTR_PROVISION.PROVISION TO ROLE AD_GRP_FR_OPERATION;
USE ROLE ACCOUNTADMIN;
CREATE TAG IF NOT EXISTS AVTR_DB_OP_MGMT.RAW.GRANULAR_ROLE_TAG
    ALLOWED_VALUES 'true', 'false';
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON ALL TABLES IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON ALL EXTERNAL TABLES IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON ALL VIEWS IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON ALL MATERIALIZED VIEWS IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON ALL STREAMS IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON ALL TASKS IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON ALL STAGES IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON ALL FILE FORMATS IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON ALL FUNCTIONS IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON ALL PROCEDURES IN DATABASE AVTR_DB_OP_MGMT TO ROLE DR_RL_AVTR_OP_MGMT_RW;
USE ROLE SECURITYADMIN;
GRANT select ON TABLE DB_AVTR_PROVISION.PROVISION.STATEMENTS TO ROLE AD_GRP_FR_OPERATION;
USE ROLE ACCOUNTADMIN;
ALTER ROLE IF EXISTS AD_GRP_FR_OPERATION SET TAG AVTR_DB_OP_MGMT.RAW.GRANULAR_ROLE_TAG = 'true';
